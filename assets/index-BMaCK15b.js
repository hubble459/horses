(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function u(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=u(o);fetch(o.href,i)}})();function O(a,r){const u=a.width,s=100,o=Array(s*s).fill("#0000"),i=Math.floor(u/s),d=(n,f)=>Math.floor(Math.random()*(f-n+1)+n),y=Array.from({length:20},()=>`hsl(${d(0,360)}deg ${d(30,70)}% ${d(70,90)}%)`),w=n=>n%s,M=n=>Math.floor(n/s);function t(n,f,c){r.fillStyle=c,r.fillRect(n*i,f*i,i,i)}y.forEach(n=>{o[Math.floor(Math.random()*o.length)]=n});function h(){o.forEach((n,f)=>{const c=w(f),l=M(f);t(c,l,n)})}function g(){const n=y[Math.floor(Math.random()*y.length)],f=o.map((e,m)=>e===n?m:-1).filter(e=>e!==-1),c=f.flatMap(e=>{const m=w(e),b=M(e);return[m>0&&o[e-1]!==n&&e-1,m<s-1&&o[e+1]!==n&&e+1,b>0&&o[e-s]!==n&&e-s,b<s-1&&o[e+s]!==n&&e+s].filter(Boolean)}).filter(e=>o[e]==="#0000");if(c.length)c.length===1&&(o[c[0]]=n);else{console.log("DIED",n),y.splice(y.indexOf(n),1);return}const l=f.reduce(([e,m],b)=>[e+w(b),m+M(b)],[0,0]),[p,x]=[Math.round(l[0]/f.length),Math.round(l[1]/f.length)];c.sort((e,m)=>{const b=I=>Math.hypot(w(I)-p,M(I)-x),v=b(m)-b(e);return(o[m]==="#0000"?1:o[e]==="#0000"?-1:0)||v}),o[c[0]]=n,h(),requestAnimationFrame(g)}h(),y.forEach(()=>requestAnimationFrame(g))}function P(a,r){const u=a.width,s=a.height,o=1e3,i=-1.8,d=.5,y=-1,w=1,M=r.createImageData(u,s),t=M.data;for(let h=0;h<u;h++)for(let g=0;g<s;g++){const n=i+h/u*(d-i),f=y+g/s*(w-y);let c=0,l=0,p=0;for(;c*c+l*l<=4&&p<o;){const m=c*c-l*l+n;l=2*c*l+f,c=m,p++}const x=p===o?0:p/o*255,e=(g*u+h)*4;t[e]=x,t[e+1]=x,t[e+2]=x,t[e+3]=255}r.putImageData(M,0,0)}function $(a,r){const u=(t,h)=>Math.floor(Math.random()*(h-t+1)+t),s=[],d={x:0,y:0,mass:500};for(let t=0;t<100;t++)s.push({x:Math.random()*a.width,y:Math.random()*a.height,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,mass:Math.random()*5+1,color:`hsl(${u(0,360)}deg ${u(30,70)}% ${u(70,90)}%)`});a.addEventListener("mousemove",t=>{const h=a.getBoundingClientRect();d.x=t.clientX-h.left-30,d.y=t.clientY-h.top-30});function y(){for(const t of s){let h=0,g=0;const n=d.x-t.x,f=d.y-t.y,c=Math.sqrt(n*n+f*f);if(c>1){const l=.09*d.mass*t.mass/(c*c);h+=l*n/c,g+=l*f/c}for(const l of s){if(l===t)continue;const p=l.x-t.x,x=l.y-t.y,e=Math.sqrt(p*p+x*x);if(e>1){const m=.09*l.mass*t.mass/(e*e);h+=m*p/e,g+=m*x/e}}t.vx+=h,t.vy+=g,t.x+=t.vx,t.y+=t.vy,(t.x<0||t.x>a.width)&&(t.vx*=-1),(t.y<0||t.y>a.height)&&(t.vy*=-1)}}function w(){r.clearRect(0,0,a.width,a.height);for(const t of s)r.beginPath(),r.arc(t.x,t.y,t.mass,0,Math.PI*2),r.fillStyle=t.color,r.fill();r.beginPath(),r.arc(d.x,d.y,10,0,Math.PI*2),r.fillStyle="red",r.fill()}function M(){y(),w(),requestAnimationFrame(M)}M()}const A={artwork:O,mandel:P,nbody:$},S=document.getElementById("canvas"),_=S.getContext("2d");if(_===null)throw new Error("Could not get context from canvas");var E;const L=(E=location.hash)==null?void 0:E.slice(1),q=document.querySelectorAll("button[id^=mode_]");for(const a of q){const r=a.id.slice(5);a.addEventListener("click",()=>{location.hash=r;const u=A[r];u?(console.debug(`Starting ${r}...`),u(S,_)):console.debug(`Could not find ${r}`)}),r===L&&a.click()}
