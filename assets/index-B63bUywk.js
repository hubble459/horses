(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function u(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=u(o);fetch(o.href,i)}})();function O(l,r){const u=l.width,s=100,o=Array(s*s).fill("#0000"),i=Math.floor(u/s),d=(n,f)=>Math.floor(Math.random()*(f-n+1)+n),y=Array.from({length:20},()=>`hsl(${d(0,360)}deg ${d(30,70)}% ${d(70,90)}%)`),w=n=>n%s,M=n=>Math.floor(n/s);function t(n,f,c){r.fillStyle=c,r.fillRect(n*i,f*i,i,i)}y.forEach(n=>{o[Math.floor(Math.random()*o.length)]=n});function h(){o.forEach((n,f)=>{const c=w(f),a=M(f);t(c,a,n)})}function g(){const n=y[Math.floor(Math.random()*y.length)],f=o.map((e,m)=>e===n?m:-1).filter(e=>e!==-1),c=f.flatMap(e=>{const m=w(e),b=M(e);return[m>0&&o[e-1]!==n&&e-1,m<s-1&&o[e+1]!==n&&e+1,b>0&&o[e-s]!==n&&e-s,b<s-1&&o[e+s]!==n&&e+s].filter(Boolean)}).filter(e=>o[e]==="#0000");if(c.length)c.length===1&&(o[c[0]]=n);else{console.log("DIED",n),y.splice(y.indexOf(n),1);return}const a=f.reduce(([e,m],b)=>[e+w(b),m+M(b)],[0,0]),[x,p]=[Math.round(a[0]/f.length),Math.round(a[1]/f.length)];c.sort((e,m)=>{const b=I=>Math.hypot(w(I)-x,M(I)-p),v=b(m)-b(e);return(o[m]==="#0000"?1:o[e]==="#0000"?-1:0)||v}),o[c[0]]=n,h(),requestAnimationFrame(g)}h(),y.forEach(()=>requestAnimationFrame(g))}function P(l,r){const u=l.width,s=l.height,o=1e3,i=-1.8,d=.5,y=-1,w=1,M=r.createImageData(u,s),t=M.data;for(let h=0;h<u;h++)for(let g=0;g<s;g++){const n=i+h/u*(d-i),f=y+g/s*(w-y);let c=0,a=0,x=0;for(;c*c+a*a<=4&&x<o;){const m=c*c-a*a+n;a=2*c*a+f,c=m,x++}const p=x===o?0:x/o*255,e=(g*u+h)*4;t[e]=p,t[e+1]=p,t[e+2]=p,t[e+3]=255}r.putImageData(M,0,0)}function $(l,r){const u=(t,h)=>Math.floor(Math.random()*(h-t+1)+t),s=[],d={x:0,y:0,mass:1e3};for(let t=0;t<100;t++)s.push({x:Math.random()*l.width,y:Math.random()*l.height,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,mass:Math.random()*5+1,color:`hsl(${u(0,360)}deg ${u(30,70)}% ${u(70,90)}%)`});l.addEventListener("mousemove",t=>{const h=l.getBoundingClientRect();d.x=t.clientX-h.left-30,d.y=t.clientY-h.top-30});function y(){for(const t of s){let h=0,g=0;const n=d.x-t.x,f=d.y-t.y,c=Math.sqrt(n*n+f*f);if(c>1){const a=.1*d.mass*t.mass/(c*c);h+=a*n/c,g+=a*f/c}for(const a of s){if(a===t)continue;const x=a.x-t.x,p=a.y-t.y,e=Math.sqrt(x*x+p*p);if(e>1){const m=.1*a.mass*t.mass/(e*e);h+=m*x/e,g+=m*p/e}}t.vx+=Math.min(Math.max(h,-10),10),t.vy+=Math.min(Math.max(g,-10),10),t.x+=t.vx,t.y+=t.vy,(t.x<0||t.x>l.width)&&(t.vx*=-1),(t.y<0||t.y>l.height)&&(t.vy*=-1)}}function w(){r.clearRect(0,0,l.width,l.height);for(const t of s)r.beginPath(),r.arc(t.x,t.y,t.mass,0,Math.PI*2),r.fillStyle=t.color,r.fill();r.beginPath(),r.arc(d.x,d.y,10,0,Math.PI*2),r.fillStyle="red",r.fill()}function M(){y(),w(),requestAnimationFrame(M)}M()}const A={artwork:O,mandel:P,nbody:$},S=document.getElementById("canvas"),_=S.getContext("2d");if(_===null)throw new Error("Could not get context from canvas");var E;const L=(E=location.hash)==null?void 0:E.slice(1),q=document.querySelectorAll("button[id^=mode_]");for(const l of q){const r=l.id.slice(5);l.addEventListener("click",()=>{location.hash=r;const u=A[r];u?(console.debug(`Starting ${r}...`),u(S,_)):console.debug(`Could not find ${r}`)}),r===L&&l.click()}
